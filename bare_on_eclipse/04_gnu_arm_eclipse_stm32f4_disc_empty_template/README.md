#GNU ARM Eclipse template for STM32F4-Discovery projects with STM32CubeMX and OpenOCD
##Rationale
- GNU ARM Eclipse is the best development environment for STM32 chips.
- STM32CubeMX is the best way to generate code that initialize the hardware.
- The project files generated by STM32CubeMX for SW4STM32, which is ST's free IDE based on Eclipse are not 100% compatible with GNU ARM Eclipse.
- In order to ease updates in the files generated by STM32CubeMX in increments (when adding more hardware to the project, etc.), I think it is preferable to make as few changes as possible in that code, and write all application code in other files and directories.

##Implementation
I reach that goal in the following manner.
- I create a GNU ARM Eclipse project for the STM32F407xx MCU and remove all files from it (done once in this template, no need to redo it).
- I copy all the directories generated by STM32CubeMX under a directory called stm32cubemx_generated_code at the top of the GNU ARM Eclipse project. I can do this as many times as I want without breaking my project (except for a couple of exceptions I will come to).
- I adapt the GNU ARM Eclipse project with the right linker settings, and update include and linker script paths, so the project finds the files under stm32cubemx_generated_code (done once in this template, no need to redo it).
- My application files are located wherever I want, but not under stm32cubemx_generated_code.

##Notes
- This project is not a template per se, but a simple project to copy/paste.
- In order to ease regression tests of this project, it is not actually empty. It is compilable and runnable. The contents of stm32cubemx_generated_code are generated from a standard project for STM32F4-Discovery in STM32CubeMX (not a single change between creation and code generation). The actual application is an empty forever loop.
- Unfortunately, STM32CubeMX reuses the name of the project configured by the user as a directory name in its directory structure (under SW4STM32 - the linker script is there). In order for my GNU ARM Eclipse settings to work correctly, that name has to be known in advance. I have chosen a simple arbitrary name: __project__.

##Exceptions
There are a few changes that are necessary under stm32cubemx_generated_code every time the contents are replaced:
- Call the application's main function in main.c. E.g.:
  - #include "appl_main.c"
  - Invoke appl_main() from main(), under the main while (1).
- Because of a bug in Eclipse CDT, that seems surprinsingly hard to come around, rename tm32cubemx_generated_code/Drivers/CMSIS/Device/ST/STM32F4xx/Source/Templates/gcc/startup_stm32f407xx.s to startup_stm32f407xx.S (change the case of the extension to uppercase, so it gets compiled).

One could also appy the same principle to some appl_init() function that could be invoked from main.c, before the main loop if somehow the hardware initialization performed by STM32CubeMX was not entirely satisfying (I haven't had that problem so far).

 ##Using the "template"
 - Open the project. Copy/paste it to a name of your liking.
 - Generate your low level code with STM32CubeMX.
 - Replace the contents of stm32cubemx_generated_code in the new project with the directories generated by STM32CubeMX.
 - Go through the exceptions above and make the necessary changes.
 - Compile, run, have fun!
 